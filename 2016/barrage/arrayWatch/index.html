<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>array watch</title>
	
</head>
<body>
		<pre>	
			obj = {
			        a: {e: 4, f: 5, g: [{a: 1, b: 2}, [3, 4]], dd: {ddd: 1}},
			        b: 2,
			        c: 3
			    };
		</pre>
		<ul id="changeStyle">
		    <li>
		        <a href="javascript:void(0)" onClick="dataOne()">
		        	obj.b
		        </a>
		    </li>
		    <li>
		        <a href="javascript:void(0)" onClick="dataTwo()">
		        	obj.a.dd.ddd
		        </a>
		    </li>
		    <li>
		        <a href="javascript:void(0)" onClick="dataThree()">
		        	obj.a.g[0].a
		        </a>
		    </li>
		    <li>
		        <a href="javascript:void(0)" onClick="dataFour()">
		            obj.a.g.push()
		        </a>
		    </li>
		</ul>

		<div id="path">
		</div>
		<div id="old-val">
		</div>
		<div id="new-val">
		</div>


		<script type="text/javascript" src="watch.js"></script>
		<script>
			document.getElementsByTagName('pre')[0].style.border = "1px solid red";
			for(let i = 0; i < document.getElementsByTagName('a').length; i++){
				document.getElementsByTagName('a')[i].style.textDecoration = "none";
				document.getElementsByTagName('a')[i].style.color = "navy";
			}


		    var obj = {
		        a: {e: 4, f: 5, g: [{a: 1, b: 2}, [3, 4]], dd: {ddd: 1}},
		        b: 2,
		        c: 3
		    };

		    new Watch(obj, call);
		    function call(path, newVal, oldVal) {
		        document.getElementById('path').innerHTML='路径:'+path;
		        document.getElementById('old-val').innerHTML='变化后的值:'+newVal;
		        document.getElementById('new-val').innerHTML='变化前的值:'+oldVal;
		    }

		    function dataOne() {
		        obj.b = Math.floor(Math.random()*10);
		    }

		    function dataTwo() {
		        obj.a.dd.ddd = Math.floor(Math.random()*10);
		    }

		    function dataThree() {
		        obj.a.g[0].a=Math.floor(Math.random()*10);
		    }

		    function dataFour() {
		        obj.a.g.push(Math.floor(Math.random()*10));
		    }
		</script>


	
		
</body>
</html>